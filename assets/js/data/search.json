[ { "title": "使用 Repo 下载 AOSP 源代码", "url": "/posts/aosp-repo-guide/", "categories": "Tutorial, Android", "tags": "Android", "date": "2020-11-12 00:00:00 +0800", "snippet": "本指导记录了在 Windows 下（除了安装外，其余章节 Linux 同样适用）使用 Repo 工具的过程，包括安装 Repo、配置代理、同步全部或部分 Android Open Source Project（APPS）工程源代码到本地，可方便 Android 系统研究人员后续使用 Source Insight 等工具本地查阅代码。安装 Repo（Windows）安装 Pythonrepo 是 Python 脚本，依赖于 Python。前往 https://www.python.org/downloads/ 下载安装 Python 3，安装过程注意勾选创建 PATH 环境变量，使 Pyt..." }, { "title": "理解 App Ops", "url": "/posts/app-ops/", "categories": "Technology, Android", "tags": "Android", "date": "2020-08-26 00:00:00 +0800", "snippet": "概述根据 Google 的文档，从 Android 4.3 开始，Android 应用框架引入了 App Ops。App Ops 涵盖了广泛的功能，被用于访问控制和跟踪，帮助运行时权限访问控制和跟踪到电池消耗。也就是说 App Ops 也被用于安全用途，具体而言：新的权限模型由传统 permission 和 App Ops 共同组成，一些权限会额外关联 op，例如 android.permission.ACCESS_FINE_LOCATION permission 就关联了 OPSTR_FINE_LOCATION 这个 App Ops，但并非所有 permission 都有对应的 op。..." }, { "title": "深入理解 OAuth 2.0", "url": "/posts/dive-into-oauth2/", "categories": "Technology, Cybersecurity", "tags": "OAuth 2.0", "date": "2020-03-16 00:00:00 +0800", "snippet": "OAuth 2.0 RFC（The OAuth 2.0 Authorization Framework）篇幅很长、内容详实，覆盖了包括原理概念、工作流程、报文格式、安全性、拓展性等等诸多方面，直接阅读十分不易。因此，本文结合博主的背景知识，提取、翻译规范主干内容并深入解读 OAuth 2.0，意图帮助读者避免一开始就陷入 RFC 的繁枝末节中。整体介绍在传统的客户端/服务器（client-server）认证模型中，客户端直接使用 resource orwner（资源所有者）的凭据（credentials，例如账户和口令）来请求访问服务器上的 protected resource（受保护资..." }, { "title": "OpenWrt Cloudflare DDNS", "url": "/posts/openwrt-cloudflare-ddns/", "categories": "Tutorial, OpenWrt", "tags": "OpenWrt, DDNS", "date": "2020-03-03 00:00:00 +0800", "snippet": "本文演示了如何在 OpenWrt 上安装和设置 DDNS 软件包，最后接入 Cloudflare 提供的 DDNS 服务。安装 DDNS 软件包要使用 Cloudflare DDNS，你需要安装 ddns-scripts 和 ddns-scripts_cloudfare.com-v4 两个软件包：opkg install ddns-scripts ddns-scripts_cloudfare.com-v4其中前者是 DDNS 服务主功能脚本，后者是它的 Cloudflare 支持。获取 Cloudflare API KeyDDNS 的原理其实很简单，就是客户端定期通过 DNS 服务商提供..." }, { "title": "搭建 openmediavault NAS", "url": "/posts/nas-on-openmediavault/", "categories": "Tutorial, NAS", "tags": "openmediavault", "date": "2020-02-27 00:00:00 +0800", "snippet": "本文详细记录了在 openmediavault 上搭建私人 NAS 的过程，包括：安装配置 openmediavault、Docker；部署 Transmission BT 工具、Nextcloud 网盘等容器；配置 HTTP/HTTPS 反向代理和 Let’s Encrypt 证书，最终实现个人 NAS 的搭建。为什么选择 openmediavault？简要对比部分主流 NAS 操作系统，博主认为 openmediavault 更优 Synology DSM 适合无技术背景或希望开箱即用的用户。博主不选择的原因： 相对臃肿，不够简洁 每块磁盘..." }, { "title": "编译器介绍", "url": "/posts/introduction-to-compiler/", "categories": "Technology, Compiler", "tags": "compiler", "date": "2020-02-27 00:00:00 +0800", "snippet": "分层前端（frontend）将源代码翻译为一个中间表示（intermediate representation, IR）。clang 是 LLVM 中 C 系语言的前端。词法分析词法分析是为了识别输入（源代码）中特定单词的准确含义，比如一个单词到底是语言的关键字还是程序员自定义的变量名？注释开始结束？这些分析结果将作为后续语法分析的输入。词法分析器基本原理是正则表达式+action，即匹配到正则表达式时采取某个action。例如：匹配到 /*...*/ 时什么也不做，匹配到 int a 时识别到 int 是一个类型关键字，a 是标识符。最后将上述判断输出。lex 是 Linux 上的语法..." }, { "title": "OpenWrt 安装 Shadowsocks Server", "url": "/posts/shadowsocks-server-on-openwrt/", "categories": "Tutorial, Shadowsocks", "tags": "Shadowsocks", "date": "2020-02-22 00:00:00 +0800", "snippet": "简介在 OpenWrt 路由器上安装 server 版 Shadowsocks，使得客户端设备能够以 VPN 的形式远程连接到家庭局域网。安装 Shadowsocks ServerStep 1 - 安装 shadowsocks-libev-server 软件包前往作者项目主页获取最新版本的 shadowsocks-libev-server 并安装，安装之前用如下命令查询自己路由器 CPU 所属的平台架构opkg print-architecture也可以使用软件源的方法安装，参考 OpenWrt Shadowsocks 安装&amp;amp;配置指南 添加软件源，然后执行以下命令安装op..." }, { "title": "App Links 及其安全性", "url": "/posts/app-links-and-its-security/", "categories": "Technology, Android", "tags": "Android", "date": "2020-02-07 00:00:00 +0800", "snippet": "在 Android 上 Google 提供了一套名为 App Links 和 Deep Links 的由 URI/URL 跳转到原生 Android 应用组件的协议及实现，使得用户从能够从原生应用（包括浏览器页面）直接通过链接跳转到指定的应用内容。本文详细介绍了它们如何运作，并剖析了其中的安全性。App Links 的实现细节及与 Deep Links 间区别App Links 是一种特殊类型的 Deep Links，可以看作是 Deep Links 的升级版本（Android 6.0 引入）。二者主要区别在于：当用户点击 App Links 时将直接跳转到应用内容，而 Deep Li..." }, { "title": "声明（Declaration）与定义（Definition）的区别", "url": "/posts/difference-between-definition-and-declaration/", "categories": "Technology, Programing", "tags": "Programing", "date": "2019-06-24 00:00:00 +0800", "snippet": "在计算机科学领域，声明（Declaration）是指向编译器说明一个变量或函数的信息，包括：名字、类型、初始值等，即声明变量、函数的属性细节；而定义（Definition）则指明变量、函数存储在哪里，当定义发生时，系统为变量或函数分配内存单元。在 C 语言中，一般的声明语句同时包含了定义，二者同时发生，也就是说声明和定义没有区别。例如，考虑下面的声明（定义）语句int a;这里，这一语句声明了变量名 a 以及数据类型 int 两个信息，这些信息会告知给编译器，并将存储在符号表中这一数据结构中。除此以外，2 字节（按编译器的类型而不同）的内存将被分配。以下这些声明也包含了定义行为：doub..." }, { "title": "OpenWrt Shadowsocks 使用 GFWList 路由规则", "url": "/posts/shadowsocks-on-openwrt-with-gfwlist/", "categories": "Tutorial, Shadowsocks", "tags": "Shadowsocks, OpenWrt", "date": "2019-06-21 00:00:00 +0800", "snippet": "介绍在 《OpenWrt Shadowsocks 安装&amp;amp;配置指南》一文中博主详细介绍了使用 CHNRoutes 规则翻墙方案，本文进一步说明如何在其基础上切换为 GFWList 规则，即仅在 GFWList 中流量的走 Shadowsocks 代理。方案的基本思路是基于 GFWList IP 地址列表构建 iptables (防火墙) 规则，将目标 IP 的流量转发至 Shadowsocks。注意：你首先需要完成前述文章的配置内容Step 1 - 准备 GFWList ipset 集ipset 是一个iptables 的辅助工具，能够轻松愉快地创建和维护一组IP地址。本文..." }, { "title": " KMS on OpenWrt router for activating Windows Office", "url": "/posts/install-microsoft-kms-on-openwrt/", "categories": "Tutorial, OpenWrt", "tags": "OpenWrt", "date": "2019-01-18 00:00:00 +0800", "snippet": "In this tutorial, I will introduce how to set up a KMS (Key Management Service) on OpenWrt 18.06.01 and activate your Windows Office 2016 VOL (Volume License) editions automatically.Install and run openwrt-vlmcsd on your OpenWrtThe First step to activate Window Office is to install openwrt-vlmcsd..." }, { "title": "搭建 OpenWrt KMS 服务，激活 Office 2016", "url": "/posts/install-kms-on-openwrt/", "categories": "Tutorial, OpenWrt", "tags": "OpenWrt", "date": "2019-01-15 00:00:00 +0800", "snippet": "本文介绍了如何在 OpenWrt 18.06.1 下安装 KMS 服务并激活你的 Windows Office 2016 VOL 版。安装 openwrt-vlmcsd分别前往项目主页安装 openwrt-vlmcsd luci-app-vlmcsd启动 openwrt-vlmcsd 服务在 openwrt-vlmcsd 的项界面勾选 Auto activate 和Enable，然后点击 Save &amp;amp; Apply激活 Office 2016以管理员权限打开 cmd，运行以下命令## 32位 Officecd C:\\Program Files (x86)\\Microso..." }, { "title": "NAS 相关问题记录", "url": "/posts/nas-usual-configuration-records/", "categories": "Tutorial, NAS", "tags": "NAS", "date": "2018-12-02 00:00:00 +0800", "snippet": "一些常用命令 查找最新修改的文件 (5 分钟内)find ./ -mmin -5 -type f 查看文件夹的大小du -h --max-depth=0 /foo/bar将频繁写入的日志文件挂载到 /dev/null#!/bin/sh#mount -o bind /dev/null /var/log/scemd.logmount -o bind /dev/null /var/log/messagesmount -o remount,noatime,commit=600 /将 Emby 日志转移至虚拟内存磁盘Emby 会不间断地写入日志到磁盘，因此可通过软连接的方法将其日志路径改为虚拟..." }, { "title": "Chrome 的 Captive Portal 处理机制", "url": "/posts/captive-portal-handling-of-chrome/", "categories": "Technology, Chromium", "tags": "Chromium", "date": "2018-10-22 00:00:00 +0800", "snippet": "Google Chrome 在 M63 版本引入了一项修改以解决 Captive Portal 场景下的用户登录问题 —— 当未登录的用户访问 HTTPS 网站时，由于 Captive Portal 的拦截，浏览器会出现网络超时、SSL/TLS 告警等问题。本文详细介绍了 Chrome M63 的这项机制。背景Captive Portal 中文通常译作“强制主页”或“强制登录门户”，是用户被网关授权访问 Internet 前的登录页面，在很多公共地点（如咖啡厅、机场、酒店）的网络连接都会使用到这项技术来要求用户认证后上网。Captive Portal 工作原理无非两种 将所有 DNS ..." }, { "title": "ESXi 安装&amp;配置 OpenWrt", "url": "/posts/openwrt-on-esxi/", "categories": "Tutorial, ESXi", "tags": "ESXi, OpenWrt", "date": "2018-09-23 00:00:00 +0800", "snippet": "基于 ESXi X86 虚拟机设备构建 OpenWrt 路由器是一种兼顾性能和敏捷性的软路由解决方案。本文详细介绍了如何在 vSphere ESXi 6.7 下部署最新版本的 OpenWrt。制作 OpenWrt ESXi 镜像点击链接进入官方网站，在你的 Windows 电脑上安装好 ESXi 镜像制作工具 StarWind V2V Converter。点击链接下载最新版本的 Stable Release OpenWrt 镜像。ESXi 一般运行在 X64 平台，因此我们选择 x86/64 目标平台的镜像文件，文件系统选择 ext4。例如：https://downloads.openw..." }, { "title": "OpenWrt 常用网络配置", "url": "/posts/openwrt-usual-configuration/", "categories": "Tutorial, OpenWrt", "tags": "OpenWrt", "date": "2018-09-22 00:00:00 +0800", "snippet": "文章记录了博主使用 OpenWrt 过程中多项常用网络功能的配置方法，包括 AP 模式、主机名设置、USB 联网等，以备后续之需。切换为 AP 模式（Bridged AP）一般场景，OpenWrt 路由器工作在「Router”」模式，包含了 NAT、拨号、DHCP、DNS 等功能。当想让一台无线 OpenWrt 设备仅作为无线接入点，而不提供路由功能，就需要让其工作在「Bridged AP」模式（俗称「无线AP」）。按获取 IP 方式的不同，有两种方法让 OpenWrt 路由器工作在 AP 模式方法 1 - 静态 IP 模式OpenWrt - Interfaces - LAN在 Comm..." }, { "title": "搭建 SSL/TLS 测试服务器", "url": "/posts/setup-a-tls-test-server/", "categories": "Technology, Cybersecurity", "tags": "TLS", "date": "2018-09-18 00:00:00 +0800", "snippet": "本文介绍了在 Ubuntu 18.04 环境下利用 OpenSSL 的 s_server 命令搭建 SSL/TLS 测试服务器的方法，可用于测试 Chrome 浏览器下的各种 SSL/TLS 错误。创建私有 CA 和服务器证书以 Chrome NET::ERT_CERT_WEAK_KEY 错误为例，要构造此场景，需要服务器证书的密钥长度小于 1024 bit，我的方法是先生成私有 CA， 然后签发相应密钥长度的服务器证书。注意：不推荐直接使用自签名证书，在Chrome 浏览器上会遇到各种问题；文章发布时 Chrome 最新稳定版本为 M69。创建一个私有 CA首先，生成服一个 CA 私钥..." }, { "title": "WP Mail SMTP troubleshooting", "url": "/posts/wp-mail-smtp-troubleshooting/", "categories": "Tutorial, WordPress", "tags": "WordPress", "date": "2018-08-22 00:00:00 +0800", "snippet": "IntroductionMy WordPress blog use WP Mail SMTP by WPForms as SMTP mail plugin, and this article records some of my troubleshooting of integration.Mail Sender’s Name is always not setIf you use Gmail as SMTP provider, the mail’s Sender Name may always appear your gmail mail address even though you..." }, { "title": "OpenWrt Shadowsocks 安装&amp;配置指南", "url": "/posts/shadowsocks-on-openwrt/", "categories": "Tutorial, Shadowsocks", "tags": "OpenWrt, Shadowsocks", "date": "2018-07-21 00:00:00 +0800", "snippet": "简介这是一篇 OpenWrt（19.07.4 版本验证）下安装 Shadowsocks 的教程。文章先介绍了整体软件栈和通信原理，然后详细说明了各个软件的安装、配置过程，最终可搭建一个路由规则是国内 IP 直连、其余 IP 走透明代理的翻墙路由器（即 CHNRoutes 黑名单模式）。要使用 GFWList 路由模式（即仅被 GFW 封锁的流量走代理），请参阅本站另外一篇文章：《OpenWrt Shadowsocks GFWlist 配置教程》。提示：推荐使用 CHNRoutes 路由规则，效果稳定且能够避免部分 GFWList 遗漏的网站无法访问，对于外网访问也有一定的加速效果（Sha..." }, { "title": "微信支付 Android SDK 逆向", "url": "/posts/wechat-android-sdk-reverse-engineering/", "categories": "Technology, Android", "tags": "微信支付, Reverse Engineering", "date": "2018-06-18 00:00:00 +0800", "snippet": "简介按照微信官方开发者网站的描述，微信支付按模式不同有刷卡支付、公众号支付、扫码支付、APP 支付、H5 支付、小程序支付六种。其中，「APP 支付」即商户 APP 调用微信提供的 SDK 调用微信支付模块，商户 APP 会跳转到微信中完成支付，支付完后跳回到商户 APP 内，最后展示支付结果。本文将介绍 Android 平台上的 APP 支付流程，然后通过逆向工程探究微信在手机端是如何对接口进行认证的。支付流程如图所示是微信「APP 支付」时序图整个过程可归纳为以下几部分： 商户 APP 与后台（商户服务器、微信服务器）通信，生成订单信息。这里关键接口是微信服务器提供的「统一下单 A..." }, { "title": "Android DexGuard 混淆指南", "url": "/posts/guide-of-android-dexguard/", "categories": "Technology, Android", "tags": "DexGuard", "date": "2018-05-11 00:00:00 +0800", "snippet": "简介DexGuard 是一款付费代码混淆软件，主要功能是对 Java 代码进行混淆，使得反编译后得到的源代码可读性差，从而加大破解的难度。DexGuard 与 Android 上主流的混淆工具 ProGuard 同属一家公司开发，但相比免费的 ProGuard 功能更多，混淆力度也更大。详细异同参考：DexGuard vs. ProGuard。本篇教程将使用 DexGuard 8.1.14 版本，在 Ubuntu 14.04 server 编译环境下对 Android Gradle 工程进行混淆。入门要使用 DexGuard，首先要在原 Android 工程中集成 DexGuard 插件..." }, { "title": "DexGuard 常见问题解决", "url": "/posts/dexguard-troubleshooting/", "categories": "Technology, Android", "tags": "DexGuard", "date": "2018-05-09 00:00:00 +0800", "snippet": "multidex 错误Android 对单个工程包含的总方法数有限制，最多是 65535 个。如果工程较大，方法数超过这个数目，就要使用 multidex 技术，否则将会运行错误。multidex 将原来编译出的 dex 文件分割为多个子 dex 文件，APP 运行时再拼接起来。DexGuard 使用自己实现的 multidex 支持，因而使用上需要一些配置。错误日志Overflow detected while writing dex file &#39;classes.dex&#39;: Too many method references : 92180; max is 65535..." }, { "title": "CentOS 7 Apache 配置 Virtual Host （虚拟主机）", "url": "/posts/set-up-apache-virtual-hosts/", "categories": "Tutorial, Apache", "tags": "Apache", "date": "2018-05-06 00:00:00 +0800", "snippet": "简介Apache 是世界上最流行的网页服务器，其功能和组件被分解为不同的单元与功能，其中基础的配置单元是站点（域名）。Apache 用 Virtul Host 表示站点，通过支持多 Virtual Host ，便能够在单个服务器上托管多个站点，共享服务器资源，而且保持互相独立。这里要注意子域名和一级域名一样，都可作为不同的 Virtual Host 进行配置。这篇教程，将介绍在 CentOS 7 VPS 上如何配置多个 Apache Virtual Host。提前准备要使用此教程，你至少要有一个可用的域名（包括子域名）。下面的教程假设你有 example.com 和 example2.c..." }, { "title": "大容量 VPS 搭建 Nextcloud 个人云盘 + aria2 在线下载", "url": "/posts/install-nextcloud-and-aria2/", "categories": "Tutorial, NAS", "tags": "NAS", "date": "2018-05-04 00:00:00 +0800", "snippet": "简介Nextcloud 是一套用于创建网络硬盘的客户端－服务器开源软件，使用与 Dropbox 相近。每个人都可以在私人服务器上安装并运行它。aria2 是一款流行的开源下载工具，支持多种协议，包括磁力链接和 BT。Resillio Sync，你可能已经听说过这款神奇的文件同步软件，在本文中会作为 aria2 BT下载功能的补充。这篇教程所使用的环境是 CentOS 7 LAMP (Linux, Apache, MySQL, and PHP)提前准备 选购大硬盘 VPS 并安装 CentOS 7。如果你觉得这篇文章有帮助可以前往优惠链接购买 Hostens Storage VPS，遵从..." }, { "title": "“信息量” 到底有多大？", "url": "/posts/quantities-of-information/", "categories": "Living, Essay", "tags": "信息论", "date": "2018-04-19 00:00:00 +0800", "snippet": "前言生活中，我们常说 “啊，这个信息量很大呀！”。但所谓信息量大，到底有多大？可以量化吗？根据香农的理论，答案是肯定的。信息量的度量信息量实际上是事件不确定度的度量，越不确定的事件，对其的描述就包含越多信息。 举例来说，“明天太阳东边升起”，这句话是没有任何信息量的，因为我们都知道太阳总是东升西落。香农为我们总结了信息量的计算方法：一条消息的信息量等于log(1/P)，其中底数大于1，通常为2，P为消息描述的事情发生的概率。根据这个公式，P越小信息量越大、P越大信息量越小。举例来说：“这次他买彩票中了头奖”，这个信息量非常大；“这次他买彩票没中奖”，这个信息量就很小。当然，事情并非绝对。..." }, { "title": "Shadowsocks 客户端使用教程", "url": "/posts/how-to-use-shadowsocks-client/", "categories": "Tutorial, Shadowsocks", "tags": "Shadowsocks", "date": "2015-04-05 00:00:00 +0800", "snippet": "简介想用 Google 搜资料却碰到404错误？想用 Facebook 交流却连账号都注册不了？没问题，本文首先简要介绍了 Shadowsocks 的工作原理，然后详细说明了各个平台下使用 Shadowsocks 客户端的方法，按照本文的方法你就可以正常访问 Google 了。Shadowsocks 工作原理如图所示，由于防火墙（GFW）作为出口网关级的存在，中国境内发起的所有境外访问均会可被随意阻断，通常这种阻断组合利用了 IP 地址拦截、 DNS 污染、流量识别等多项技术。但目前为止，防火墙的封禁还是基于黑名单机制，未在黑名单的境外服务器依然能够正常访问。基于此，借助 Shadows..." } ]
